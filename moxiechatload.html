<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Moxie ChatKit</title>
    <script src="https://chat.openai.com/chatkit/sdk.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #111;
      }
      openai-chatkit {
        width: 100%;
        height: 100%;
        display: block;
      }
    </style>
  </head>
  <body>
    <openai-chatkit id="chatkit"></openai-chatkit>

    <script>
      const params = new URLSearchParams(window.location.search);
      const token = params.get("token");
      const workflowId = params.get("workflow_id");

      if (!token || !workflowId) {
        document.body.innerHTML =
          "<p style='color:red'>Missing token or workflow_id in URL</p>";
      } else {
        const chatkit = document.getElementById("chatkit");
        chatkit.setAttribute("client-token", token);
        chatkit.setAttribute("workflow-id", workflowId);
        chatkit.setAttribute("dark", "true");
        chatkit.setAttribute("style", "height:100%;width:100%;");
      }
    </script>
  </body>
</html>
