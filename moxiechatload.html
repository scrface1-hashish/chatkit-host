<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Moxie ChatKit Load</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js"></script>
    <style>
      body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        background-color: #000;
      }
      openai-chatkit {
        height: 100%;
        width: 100%;
        display: block;
      }
    </style>
  </head>
  <body>
    <openai-chatkit id="moxie-chat"></openai-chatkit>

    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const workflowId = urlParams.get('workflow_id');

      if (token && workflowId) {
        const chat = document.getElementById("moxie-chat");
        chat.setAttribute("token", token);
        chat.setAttribute("workflow_id", workflowId);
      } else {
        document.body.innerHTML = "<h2 style='color:white;text-align:center;padding-top:50px;'>Missing token or workflow_id in URL</h2>";
      }
    </script>
  </body>
</html>
